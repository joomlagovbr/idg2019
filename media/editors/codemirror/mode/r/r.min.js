!(function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)})((function(a){"use strict";a.registerHelper("wordChars","r",/[\w.]/),a.defineMode("r",(function(b){function c(a){for(var b={},c=0;c<a.length;++c)b[a[c]]=!0;return b}function d(a,b){m=null;var c=a.next();if("#"==c)return a.skipToEnd(),"comment";if("0"==c&&a.eat("x"))return a.eatWhile(/[\da-f]/i),"number";if("."==c&&a.eat(/\d/))return a.match(/\d*(?:e[+\-]?\d+)?/),"number";if(/\d/.test(c))return a.match(/\d*(?:\.\d+)?(?:e[+\-]\d+)?L?/),"number";if("'"==c||'"'==c)return b.tokenize=e(c),"string";if("`"==c)return a.match(/[^`]+`/),"variable-3";if("."==c&&a.match(/.[.\d]+/))return"keyword";if(/[\w\.]/.test(c)&&"_"!=c){a.eatWhile(/[\w\.]/);var d=a.current();return n.propertyIsEnumerable(d)?"atom":p.propertyIsEnumerable(d)?(q.propertyIsEnumerable(d)&&!a.match(/\s*if(\s+|$)/,!1)&&(m="block"),"keyword"):o.propertyIsEnumerable(d)?"builtin":"variable"}return"%"==c?(a.skipTo("%")&&a.next(),"operator variable-2"):"<"==c&&a.eat("-")||"<"==c&&a.match("<-")||"-"==c&&a.match(/>>?/)?"operator arrow":"="==c&&b.ctx.argList?"arg-is":r.test(c)?"$"==c?"operator dollar":(a.eatWhile(r),"operator"):/[\(\){}\[\];]/.test(c)?(m=c,";"==c?"semi":null):null}function e(a){return function(b,c){if(b.eat("\\")){var e=b.next();return"x"==e?b.match(/^[a-f0-9]{2}/i):("u"==e||"U"==e)&&b.eat("{")&&b.skipTo("}")?b.next():"u"==e?b.match(/^[a-f0-9]{4}/i):"U"==e?b.match(/^[a-f0-9]{8}/i):/[0-7]/.test(e)&&b.match(/^[0-7]{1,2}/),"string-2"}for(var f;null!=(f=b.next());){if(f==a){c.tokenize=d;break}if("\\"==f){b.backUp(1);break}}return"string"}}function f(a,b,c){a.ctx={type:b,indent:a.indent,flags:0,column:c.column(),prev:a.ctx}}function g(a,b){var c=a.ctx;a.ctx={type:c.type,indent:c.indent,flags:c.flags|b,column:c.column,prev:c.prev}}function h(a){a.indent=a.ctx.indent,a.ctx=a.ctx.prev}var i=["NULL","NA","Inf","NaN","NA_integer_","NA_real_","NA_complex_","NA_character_","TRUE","FALSE"],j=["list","quote","bquote","eval","return","call","parse","deparse"],k=["if","else","repeat","while","function","for","in","next","break"],l=["if","else","repeat","while","function","for"];a.registerHelper("hintWords","r",i.concat(j,k));var m,n=c(i),o=c(j),p=c(k),q=c(l),r=/[+\-*\/^<>=!&|~$:]/;return{startState:function(){return{tokenize:d,ctx:{type:"top",indent:-b.indentUnit,flags:2},indent:0,afterIdent:!1}},token:function(a,b){if(a.sol()&&(0==(3&b.ctx.flags)&&(b.ctx.flags|=2),4&b.ctx.flags&&h(b),b.indent=a.indentation()),a.eatSpace())return null;var c=b.tokenize(a,b);return"comment"!=c&&0==(2&b.ctx.flags)&&g(b,1),";"!=m&&"{"!=m&&"}"!=m||"block"!=b.ctx.type||h(b),"{"==m?f(b,"}",a):"("==m?(f(b,")",a),b.afterIdent&&(b.ctx.argList=!0)):"["==m?f(b,"]",a):"block"==m?f(b,"block",a):m==b.ctx.type?h(b):"block"==b.ctx.type&&"comment"!=c&&g(b,4),b.afterIdent="variable"==c||"keyword"==c,c},indent:function(a,c){if(a.tokenize!=d)return 0;var e=c&&c.charAt(0),f=a.ctx,g=e==f.type;return 4&f.flags&&(f=f.prev),"block"==f.type?f.indent+("{"==e?0:b.indentUnit):1&f.flags?f.column+(g?0:1):f.indent+(g?0:b.indentUnit)},lineComment:"#"}})),a.defineMIME("text/x-rsrc","r")}));